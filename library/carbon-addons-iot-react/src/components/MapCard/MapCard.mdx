# `MapCard` component

## Table of Contents

- [Getting started](#getting-started)
- [Map controls](#map-controls)
- [Zoom control](#zoom-control)
- [Layered map controls](#layered-map-controls)
- [Legend](#legend)
- [Settings content](#settings-content)
- [Mapbox Example](#mapbox-example)
- [Open layers Example](#open-layers-example)
- [Custom draggable panels](#custom-draggable-panels)
- [Props](#props)
- [Feedback](#feedback)
- External Links
  - [Design specs](https://pages.github.ibm.com/ai-applications/design/patterns/maps/overview/)
  - [Source Code](https://github.com/carbon-design-system/carbon-addons-iot-react/tree/next/packages/react/src/components/MapCard)

## Getting started

The `MapCard` component requires an external map component to work and it aims to aid the creation of maps that meet the requirements of carbon's [Interactive Maps pattern](https://pages.github.ibm.com/ai-applications/design/patterns/maps/overview/). `MapCard` implements the card API and can be used the same way as other cards. There are two example implementations, using [Mapbox](#mapbox-example) and [Open Layers](#open-layers-example), provided in Storybook that serve as references for creating custom maps using any map engine and layers under the hood. `MapCard` exposes a container element via `mapContainerRef` for the initialization of the external engine.
Besides inherited `Card` card actions, that among other things provides buttons and click callbacks for expansion to full page and toggling of a settings side panel, the `MapCard` component itself provides a few map specific features. The most important feature is allowing user control of the map by providing a set of special buttons, referred to as map controls.

```jsx
import { MapCard } from 'carbon-addons-iot-react';
```

## Map controls

Map controls are elements that are clicked or tapped to trigger an action (or to select and trigger an action). Map controls are defined by the programmer via the prop `mapControls` and directly overlay the map on the right side. The `mapControls` expects an array of objects, each defining a control button or a group. The order of the array defines the order in which the controls are displayed from top to bottom. The control button definition object has 3 mandatory props as exemplified below. The state of the map is handled outside the MapCard component.

```jsx
const [active, setActive] = useState();
const mapControls = [
  {
    icon: Events32,
    iconDescription: 'Population',
    onClick: () => setActive('population'),
  },
];
```

Use button type `icon-selection` and include a `selected` prop in order to make the map controls behave like selection buttons that toggles an active state when clicked. An `id` can be added to the map control to manage the states when there are multiple selection buttons as shown in the example below.

```jsx
const [selectedControls, setSelectedControls] = useState([]);
const toggleControlSelection = (id) => {
  setSelectedControls((state) =>
    selectedControls.includes(id) ? state.filter((currentId) => currentId !== id) : [...state, id]
  );
};

const mapControls = [
  {
    id: 'example-id',
    icon: Rain32,
    iconDescription: 'Rainy',
    onClick: toggleControlSelection('example-id'),
    kind: 'icon-selection',
    selected: selectedControls.includes('example-id'),
  },
  {
    id: 'example-id2',
    icon: Sun32,
    iconDescription: 'Sunny',
    onClick: toggleControlSelection('example-id2'),
    kind: 'icon-selection',
    selected: selectedControls.includes('example-id2'),
  },
];
```

Map controls can be grouped together by placing them in an object with a group array property.

```jsx
const mapControls = [
  {
    group: [
      {
        icon: Rain32,
        iconDescription: 'Rainy',
        onClick: () => {},
      },
      {
        icon: Sun32,
        iconDescription: 'Sunny',
        onClick: () => {},
      },
    ],
  },
];
```

When a group of related map controls is large it can be made scrollable by adding `hasScroll` as shown in the example below. It is also possible to automatically limit the height of the scrollable container to the specific number of visible map controls using `visibleItemsCount`. Scroll controls are only shown when the `MapCard` is expanded and it is not possible to combine with selection buttons.

```jsx
const mapControls = [
  {
    hasScroll: true,
    visibleItemsCount: 4,
    group: [
      /** larger list of objects */
    ],
  },
];
```

## Zoom control

The zoom control is a mandatory map control that always will be present. The only configuration needed is a mapping to the zoom functions of the underlying map engine. This control is anchored at the lower right corner of the map. See the simplified code below.

```jsx
/** Assumes the availability of a initialized Mapbox engine called map */
<MapCard
  onZoomIn={map.zoomIn({ duration: 250 });}
  onZoomOut={map.zoomOut({ duration: 250 });}
/>
```

## Layered map controls

Layered map controls are placed in a fly out control in the top left corner. To trigger the flyout, click the icon button with the left caret indicator to activate the flyout pane. Click the same icon button to close the flyout when finished. Layered map controls follow the same structure as normal map controls but cannot be further grouped. They are defined by the programmer via the prop `layeredControls`.

```jsx
const [active, setActive] = useState();
const layeredControls = [
  {
    icon: Events32,
    iconDescription: 'Population',
    onClick: () => setActive('population'),
  },
];
```

## Legend

The legend is a required piece for an interactive map. It can either be anchored on the lower left corner of the map or a full bleed version that stretches from side to side at the bottom of the map. The full width legend can be collapsed by the user to free up space for the map. Use the `stops` property to control the legend content depending on what the map is showing. The `stops` prop is an array of rows for the legend. Each row has a value and a color and is represented by an array where pos 0 is the text and pos 1 the color.

```jsx
stops: [
  [0, '#f8d5cc'],
  [1000000, '#f4bfb6'],
  [5000000, '#f1a8a5'],
  [10000000, '#ee8f9a'],
  [50000000, '#ec739b'],
  [100000000, '#dd5ca8'],
  [250000000, '#c44cc0'],
  [500000000, '#9f43d7'],
  [1000000000, '#6e40e6'],
];
```

## Settings content

The settings content should open up in a left side panel when the user clicks on the card action settings icon at the top right corner. The settings icon is only shown when the card is in full page mode, i.e. when the prop `isExpanded` is true. The `settingsContent` prop is a "render prop", i.e. a function provided by the developer that is responsible for rendering the UI needed to configure the map controls. Below is a simplified example that illustrates the involved props and logic:

```jsx
const [settingsOpen, setSettingsOpen] = React.useState(false);
const [showMapControls, setShowMapControls] = React.useState(true);
const mapControls = [
  {
    icon: Events32,
    iconDescription: 'Population',
    onClick: () => {},
  },
];

/** render prop for customization of map controls */
const settingsContent = () => (
  <fieldset>
    <legend>Map configuration</legend>
    <Checkbox
      checked={showMapControls}
      onChange={setShowMapControls}
      labelText={`Show map controls`}
      id="checkbox-1"
    />
  </fieldset>
);

<MapCard
  isExpanded
  availableActions={{ settings: true }}
  onCardAction={(id, actionType) => {
    if (actionType === 'ON_SETTINGS_CLICK') {
      setSettingsOpen((oldSettingsState) => !oldSettingsState);
    }
  }}
  isSettingPanelOpen={settingsOpen}
  settingsContent={settingsContent}
  mapControls={showMapControls ? mapControls : []}
/>;
```

## Mapbox Example

The go to choice for interactive maps in Carbon is [Mapbox](https://www.carbondesignsystem.com/data-visualization/complex-charts/#mapbox). PAL provides a full example implementation of the `MapCard` using Mapbox [here](https://github.com/carbon-design-system/carbon-addons-iot-react/tree/next/packages/react/src/components/MapCard/storyFiles).

Below is a simplified example of a Mapbox implementation showing one layer with a few stops defined for the legend. It supports zooming. The example is heavily limited for the sake of simplicity.

It expects a data prop whose contents can be found [here](https://github.com/carbon-design-system/carbon-addons-iot-react/tree/next/packages/react/src/components/MapCard/storyFiles/data.json)

```jsx
import React, { useRef, useEffect, useState } from 'react';
import mapboxgl from 'mapbox-gl';
import { MapCard } from 'carbon-addons-iot-react';

/**
 * NOTE!
 * Make sure you also import the mapbox css from
 * https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css
 * */

const MapboxExample = ({ data }) => {
  const mapContainerRef = useRef(null);
  const [map, setMap] = useState(null);
  const exampleLayer = {
    property: 'pop_est',
    stops: [
      [0, '#f8d5cc'],
      [1000000, '#f4bfb6'],
      [5000000, '#f1a8a5'],
      [10000000, '#ee8f9a'],
      [50000000, '#ec739b'],
      [100000000, '#dd5ca8'],
      [250000000, '#c44cc0'],
      [500000000, '#9f43d7'],
      [1000000000, '#6e40e6'],
    ],
  };

  /** Initialize map when component mounts */
  useEffect(() => {
    const mapboxMap = new mapboxgl.Map({
      container: mapContainerRef.current,
      /** see https://www.carbondesignsystem.com/data-visualization/complex-charts/#mapbox */
      style: 'mapbox://styles/carbondesignsystem/ck7c8ce1y05h61ipb2fixfe76',
    });

    mapboxMap.on('load', () => {
      mapboxMap.addSource('countries', {
        type: 'geojson',
        data,
      });

      mapboxMap.addLayer(
        {
          id: 'countries',
          type: 'fill',
          source: 'countries',
        },
        'country-label'
      );

      mapboxMap.setPaintProperty('countries', 'fill-color', {
        property: exampleLayer.property,
        stops: exampleLayer.stops,
      });

      setMap(mapboxMap);
    });

    /** Clean up on unmount */
    return () => mapboxMap.remove();
  }, []);

  const onZoomIn = () => {
    map.zoomIn({ duration: 250 });
  };

  const onZoomOut = () => {
    map.zoomOut({ duration: 250 });
  };

  return (
    <MapCard
      id="map-card"
      mapContainerRef={mapContainerRef}
      stops={exampleLayer.stops}
      onZoomIn={onZoomIn}
      onZoomOut={onZoomOut}
      settingsContent={() => null}
    />
  );
};
```

## Open layers Example

PAL provides an example implementation of the `MapCard` using Open Layers [here](https://github.com/carbon-design-system/carbon-addons-iot-react/tree/next/packages/react/src/components/MapCard/storyFiles).

## Custom draggable panels

See the Mapbox Example above for details on how to use the MapCard with Mapbox. This section builds on that example in order to explain how to add absolutely positioned panels that can be dragged and dropped across the map.

PAL provides a full example implementation called [MapboxDragPanelExample](https://github.com/carbon-design-system/carbon-addons-iot-react/tree/next/packages/react/src/components/MapCard/storyFiles).

**Please note** that in order for the MapboxDragPanelExample to work it needs acces to the DndProvider of the react-dnd library. There is a helper component exported for that purpose. Use it to wrap the component that should provide the drag and drop. See [draganddrop.md](https://github.com/carbon-design-system/carbon-addons-iot-react/tree/next/packages/react/docs/draganddrop.md) for more info.

```jsx
render(
  <DragAndDrop>
    <MapboxDragPanelExample />
  </DragAndDrop>
);
```

The details of the Mapbox Example have been stripped in the example below so that the code only shows what is relevant for creating draggable panels with react-dnd.

```jsx
import React, { useState, useCallback } from 'react';
import { MapCard } from 'carbon-addons-iot-react';
import { useDrop } from 'react-dnd';
import update from 'immutability-helper';

const DragPanel = ({ id, left, top, height, width, children }) => {
  const style = {
    position: 'absolute',
    zIndex: 3,
    opacity: 0.8,
    cursor: 'move',
    padding: '1rem',
    background: 'white',
  };
  const [{ isDragging }, drag] = useDrag(
    () => ({
      type: 'dragPanel',
      item: { id, left, top, height, width },
      collect: (monitor) => ({
        isDragging: monitor.isDragging(),
      }),
    }),
    [id, left, top]
  );
  return isDragging ? null : (
    <div className="drag-panel" ref={drag} style={{ left, top, height, width }}>
      {children}
    </div>
  );
};

const MapboxDragPanelExample = ({ data }) => {
  // This example is a simplification
  // See MapboxExample for above for stripped out code.
  // Below is only related to drag and drop panels

  const [panels, setPanels] = useState({
    panelA: { top: 16, left: 16, width: 100, height: 200, content: <p>I am a draggable panel</p> },
    panelB: {
      top: 50,
      left: 200,
      width: 100,
      height: 200,
      content: 'I am another draggable panel',
    },
  });

  const movePanel = useCallback(
    (id, left, top) => {
      setPanels(
        update(panels, {
          [id]: {
            $merge: { left, top },
          },
        })
      );
    },
    [panels, setPanels]
  );

  const [, drop] = useDrop(
    () => ({
      accept: 'dragPanel',
      drop(item, monitor) {
        const dropZonePadding = 16;
        const delta = monitor.getDifferenceFromInitialOffset();
        const left = Math.round(item.left + delta.x);
        const top = Math.round(item.top + delta.y);
        const dropZoneHeight = mapContainerRef.current.clientHeight;
        const dropZoneWidth = mapContainerRef.current.clientWidth;
        const minTop = dropZonePadding;
        const maxTop = dropZoneHeight - dropZonePadding - item.height;
        const minLeft = dropZonePadding;
        const maxLeft = dropZoneWidth - dropZonePadding - item.width;

        const adjustedTop = top < minTop ? minTop : top > maxTop ? maxTop : top;
        const adjustedLeft = left < minLeft ? minLeft : left > maxLeft ? maxLeft : left;

        movePanel(item.id, adjustedLeft, adjustedTop);
        return undefined;
      },
    }),
    [movePanel]
  );

  return (
    <MapCard id="map-card" dropRef={drop}>
      {Object.keys(panels).map((key) => {
        const { left, top, content, height, width } = panels[key];
        return (
          <DragPanel key={key} id={key} left={left} top={top} height={height} width={width}>
            {content}
          </DragPanel>
        );
      })}
    </MapCard>
  );
};
```

## Props

| Name                 | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Default                                                                                                                                                                                                                                                                                                                                             | Description                                                                                                                                                                                                                                                                                                                                      |
| :------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| isLegendFullWidth    | PropTypes.bool                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | false                                                                                                                                                                                                                                                                                                                                               | true makes the legend full bleed at the bottom of the map                                                                                                                                                                                                                                                                                        |
| isSettingPanelOpen   | PropTypes.bool                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | false                                                                                                                                                                                                                                                                                                                                               | true if the settings panel should be showing                                                                                                                                                                                                                                                                                                     |
| layeredControls      | PropTypes.arrayOf(MapControlPropType)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | []                                                                                                                                                                                                                                                                                                                                                  | list of layered map control buttons that are expanded horizontally                                                                                                                                                                                                                                                                               |
| mapContainerRef      | PropTypes.object.isRequired                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                     | reference to the container element that holds the 3rd party map                                                                                                                                                                                                                                                                                  |
| mapControls          | PropTypes.arrayOf(PropTypes.oneOfType([MapControlPropType,PropTypes.shape({group: PropTypes.arrayOf(MapControlPropType),visibleItemsCount: PropTypes.number,hasScroll: PropTypes.bool,}),]))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | []                                                                                                                                                                                                                                                                                                                                                  | list of map control buttons                                                                                                                                                                                                                                                                                                                      |
| onZoomIn             | PropTypes.func                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | () => {}                                                                                                                                                                                                                                                                                                                                            | callback when user zooms in                                                                                                                                                                                                                                                                                                                      |
| onZoomOut            | PropTypes.func                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | () => {}                                                                                                                                                                                                                                                                                                                                            | callback when user zooms out                                                                                                                                                                                                                                                                                                                     |
| settingsContent      | PropTypes.elementType                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                                                                                                                                                                                                                                                                                                                     | an element or component containing the settingspanel (side bar content)                                                                                                                                                                                                                                                                          |
| stops                | PropTypes.array                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | []                                                                                                                                                                                                                                                                                                                                                  | list of text - color pairs for the legend. Each pair is an array where pos 0 is the text and pos 1 the color                                                                                                                                                                                                                                     |
| title                | PropTypes.string                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                  |
| id                   | PropTypes.string                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                  |
| isLoading            | PropTypes.bool                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                  |
| isEmpty              | PropTypes.bool                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                  |
| isEditable           | PropTypes.bool                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                  |
| isExpanded           | PropTypes.bool                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     | goes full screen if expanded                                                                                                                                                                                                                                                                                                                     |
| isResizable          | PropTypes.bool                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     | True if the card can be resizable in the DashboardGrid by dragging the borders                                                                                                                                                                                                                                                                   |
| renderExpandIcon     | PropTypes.oneOfType([PropTypes.func, PropTypes.object])                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                                                                     | Define the icon render to be rendered. Can be a React component class                                                                                                                                                                                                                                                                            |
| hideHeader           | PropTypes.bool                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     | should hide the header                                                                                                                                                                                                                                                                                                                           |
| showOverflow         | deprecated                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                     | sets the CardWrapper CSS overflow to visible                                                                                                                                                                                                                                                                                                     |
| size                 | PropTypes.oneOf(['SMALL', 'SMALLWIDE', 'SMALLFULL', 'MEDIUMTHIN', 'MEDIUM', 'MEDIUMWIDE', 'LARGETHIN', 'LARGE', 'LARGEWIDE'])                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 'LARGE'                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                  |
| layout               | PropTypes.oneOf(['HORIZONTAL','VERTICAL'])                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                  |
| breakpoint           | PropTypes.oneOf(['lg','max','md','sm','xl','xs']))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                  |
| timeRange            | PropTypes.string                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                     | Optional selected range to pass at the card level                                                                                                                                                                                                                                                                                                |
| timeRangeOptions     | TimeRangeOptionsPropTypes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                     | Generates the available time range selection options. Each option should include 'this' or 'last'. i.e. { thisWeek: 'This week', lastWeek: 'Last week'}                                                                                                                                                                                          |
| availableActions     | PropTypes.shape({edit: PropTypes.bool, clone: PropTypes.bool, delete: PropTypes.bool, expand: PropTypes.bool, range: PropTypes.bool, settings: PropTypes.bool})                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                  |
| i18n                 | PropTypes.shape({ noDataLabel: PropTypes.string, noDataShortLabel: PropTypes.string, errorLoadingDataLabel: PropTypes.string,errorLoadingDataShortLabel: PropTypes.string,rollingPeriodLabel: PropTypes.string, last24HoursLabel: PropTypes.string,last7DaysLabel: PropTypes.string,lastMonthLabel: PropTypes.string, lastQuarterLabel: PropTypes.string,lastYearLabel: PropTypes.string, periodToDateLabel: PropTypes.string, thisWeekLabel: PropTypes.string, thisMonthLabel: PropTypes.string, thisQuarterLabel: PropTypes.string, thisYearLabel: PropTypes.string, hourlyLabel: PropTypes.string, dailyLabel: PropTypes.string, weeklyLabel: PropTypes.string, monthlyLabel: PropTypes.string, defaultLabel: PropTypes.node,selectTimeRangeLabel: PropTypes.string, editCardLabel: PropTypes.string, cloneCardLabel: PropTypes.string, deleteCardLabel: PropTypes.string, expandLabel: PropTypes.string, closeLabel: PropTypes.string, loadingDataLabel: PropTypes.string, overflowMenuDescription: PropTypes.string, }) | { cardTitle: 'Card Title', zoomIn: 'Zoom In', zoomOut: 'Zoom out', configurationTitle: 'Map configuration', closeSettingsIconText: 'Close', expandLabel: 'Expand', layerTriggerIconDescription: 'Layered controls', legendTitle: 'Legend', hideLegend: 'Hide legend', showLegend: 'Show legend', scrollUp: 'Scroll up', scrollDown: 'Scroll down',} | All the labels that need translation                                                                                                                                                                                                                                                                                                             |
| tooltip              | PropTypes.element                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                  |
| toolbar              | PropTypes.element                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                  |
| rowHeight            | RowHeightPropTypes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                                                                                                                                                                                                                                                     | Row height in pixels for each layout                                                                                                                                                                                                                                                                                                             |
| dashboardBreakpoints | DashboardBreakpointsPropTypes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                                     | media query pixel measurement that determines which particular dashboard layout should be used                                                                                                                                                                                                                                                   |
| dashboardColumns     | DashboardColumnsPropTypes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                     | map of number of columns to a given dashboard layout                                                                                                                                                                                                                                                                                             |
| cardDimensions       | CardSizesToDimensionsPropTypes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     | array of configurable sizes to dimensions                                                                                                                                                                                                                                                                                                        |
| contentClassName     | PropTypes.string                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                     | HTML classes that should be aplied to the content container                                                                                                                                                                                                                                                                                      |
| renderIconByName     | PropTypes.func                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     | optional function that should return an icon react element based on a icon name, it is called back with the icon name and then an object containing additional icon properties to add to the rendered icon                                                                                                                                       |
| onMouseDown          | PropTypes.func                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     | Event handlers needed for Dashboard Grid - isEditable                                                                                                                                                                                                                                                                                            |
| onMouseUp            | PropTypes.func                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                  |
| onTouchEnd           | PropTypes.func                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                  |
| onTouchStart         | PropTypes.func                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                  |
| onScroll             | PropTypes.func                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                  |
| onFocus              | PropTypes.func                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     | Optional event handlers                                                                                                                                                                                                                                                                                                                          |
| onBlur               | PropTypes.func                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                  |
| tabIndex             | PropTypes.number                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                     | Optionally adds tab index to card container                                                                                                                                                                                                                                                                                                      |
| testId               | PropTypes.string                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 'map-card'                                                                                                                                                                                                                                                                                                                                          | For testing                                                                                                                                                                                                                                                                                                                                      |
| locale               | PropTypes.string                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                     | the locale of the card, needed for number and date formatting                                                                                                                                                                                                                                                                                    |
| resizeHandles        | PropTypes.array                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                     | a way to pass down dashboard grid resize handles, only used by other card types                                                                                                                                                                                                                                                                  |
| renderEditContent    | PropTypes.func                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                     | Optional callback function that is passed an onChange function and the original cardConfig function. This allows additional information to be passed to be used in the Card Editor for this type. You need to return an array of child objects with a header: {title, tooltip: {tooltipText: PropTypes.string}} and content element to render \* |
| dropRef              | PropTypes.oneOfType([PropTypes.shape({}), PropTypes.func])                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                     | the ref needed by a drag and drop library like react-dnd. Is added to the map container element.                                                                                                                                                                                                                                                 |

## Feedback

Help us improve this component by providing feedback, asking questions on Slack, or updating this file on
[GitHub](https://github.com/carbon-design-system/carbon-addons-iot-react/tree/next/packages/react/src/components/MapCard/MapCard.mdx).
